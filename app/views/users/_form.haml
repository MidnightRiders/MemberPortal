- devise ||= false
- opts = devise ? { url: registration_path(user) } : {}

= form_for(user, opts) do |f|
  .row
    .large-4.columns
      %h3 User Information
      - if devise && devise_mapping.confirmable? && resource.pending_reconfirmation?
        %p.hint
          Currently waiting confirmation for:
          = resource.unconfirmed_email
    .large-8.columns
      .row
        .large-4.columns
          = f.label :username, class: 'inline'
        .large-8.columns
          = f.text_field :username, :autofocus => true, autocorrect: false, autocapitalize: false
      = render partial: 'devise/shared/roles_selection', locals: { user: user, params: params }
      - if devise
        .row
          .large-4.columns
            = f.label :password, class: 'inline'
          .large-8.columns
            = f.password_field :password, autocorrect: false, autocapitalize: false
            - if f.object.new_record?
              %p.hint (leave blank if you don't want to change it)
  .row
    .large-4.columns
      %h3 Contact Information
    .large-8.columns
      .row
        .large-4.columns
          = f.label :email, class: 'inline'
        .large-8.columns
          = f.email_field :email, autocorrect: false, autocapitalize: false
      .row
        .small-12.columns
          = f.label :address, 'Street Address'
          = f.text_area :address, rows: 3
      .row
        .small-12.medium-5.large-6.columns
          = f.label :city
          = f.text_field :city
        .small-4.medium-3.large-2.columns
          = f.label :state
          = f.text_field :state, size: 2
        .small-8.medium-4.columns
          = f.label :postal_code
          = f.text_field :postal_code
  - if devise && !f.object.new_record?
    .row
      .large-4.columns
        %h3
          Confirm Changes
        %p.hint (we need your current password to confirm your changes)
      .large-8.columns
        .row
          .large-4.columns
            = f.label :current_password, class: 'inline'
          .large-8.columns
            = f.password_field :current_password
  .row.text-right
    .small-12.columns= f.submit (f.object.new_record? ? 'Create' : 'Update'), class: 'button'