:ruby
  scarves = (1..14).map { |i| [i, image_url("scarves/2022/#{i}.jpg")] }.select { |(i, _)| i != 12 }
%script{ src: 'https://cdn.jotfor.ms/static/prototype.forms.js', type: 'text/javascript' }
%script{ src: 'https://cdn.jotfor.ms/static/jotform.forms.js?3.3.22538', type: 'text/javascript' }
:javascript
  JotForm.init(function(){
    JotForm.newDefaultTheme = true;
    JotForm.extendsNewTheme = false;
    JotForm.newPaymentUIForNewCreatedForms = true;
    JotForm.newPaymentUI = true;
    JotForm.alterTexts(undefined);
    JotForm.clearFieldOnHide="disable";
    JotForm.submitError="jumpToFirstError";
    /*INIT-END*/
  });
  JotForm.prepareCalculationsOnTheFly([null,{"name":"heading","qid":"1","text":"Form","type":"control_head"},{"name":"submit2","qid":"2","text":"Submit","type":"control_button"},{"description":"","name":"voteFor","qid":"3","text":"Vote for up to three scarf designs","type":"control_checkbox"}]);
  setTimeout(function() {
    JotForm.paymentExtrasOnTheFly([null,{"name":"heading","qid":"1","text":"Form","type":"control_head"},{"name":"submit2","qid":"2","text":"Submit","type":"control_button"},{"description":"","name":"voteFor","qid":"3","text":"Vote for up to three scarf designs","type":"control_checkbox"}]);
  }, 20);
#scarf-vote-modal.reveal-modal.medium{ data: { reveal: true } }
  .close-reveal-modal &#215;
  #scarf-vote{ style: 'max-height: 100%; overflow-y: auto;' }
    %form#220027631632041.jotform-form{ 'accept-charset': 'utf-8', action: '//submit.jotform.us/submit/220027631632041/', method: 'post', name: 'form_220027631632041', target: :_blank }
      %input{ name: 'formID', type: 'hidden', value: '220027631632041' }
      .form-all
        %ul.form-section.page-section
          %li#id_5.form-line.jf-required{'data-type': 'control_checkbox'}
            %h2.text-center! Pick Up&nbsp;to THREE&nbsp;Favorite Scarf&nbsp;Designs
            #cid_5.form-input-wide.jf-required
              .form-single-column{'data-component': 'checkbox'}
                - scarves.shuffle.each do |(i, img)|
                  .scarf.form-radio-item
                    %input.form-checkbox{ class: 'validate[required,maxselection,minselection]', id: "input_3_#{i}", data: { maxselection: '3', minselection: '1' }, name: 'q4_chooseUp[]', type: 'checkbox', value: "Scarf #{i}" }
                    %label{ for: "input_3_#{i}", id: "label_input_3_#{i}" }
                      Scarf ##{i}
                      %img{ alt: "Midnight Riders 2022 Scarf Contest Scarf ##{i}", src: img, width: 600 }
          = hidden_field_tag 'q4_chooseUp'
          = hidden_field_tag 'q3_email', current_user.email
          %li#id_2.form-line{ data: { type: 'control_button' } }
            #cid_2.form-input-wide
              .form-buttons-wrapper{ style: 'margin-left:156px;' }
                %button#input_2.form-submit-button{ data: { component: 'button' }, type: 'submit' }
                  Submit
          %li{ style: 'display:none' }
            Should be Empty:
            %input{ name: 'website', type: 'text', value: '' }
      :javascript
        if (JotForm) JotForm.showJotFormPowered = '0';
        var scarves = document.getElementsByName('q4_chooseUp[]');
        var pickComposer = function () {
          var hiddenField = document.getElementById('q4_chooseUp');
          var picks = [];
          for (var i = 0, len = scarves.length; i < len; i++) {
            if (scarves[i].checked === true) picks.push(scarves[i].value);
          }
          hiddenField.value = picks.join('\n');
        };
        for (var i = scarves.length; i--;) { scarves[i].addEventListener('change', pickComposer); }
        document.getElementById('220027631632041').addEventListener('submit', pickComposer);
      %input#simple_spc{ name: 'simple_spc', type: 'hidden', value: '220027631632041' }
      :javascript
        document.getElementById('si' + 'mple' + '_spc').value = '220027631632041-220027631632041';
      %script{ src: '//cdn.jotfor.ms/js/widgetResizer.js?REV=3.3.3697', type: 'text/javascript' }
