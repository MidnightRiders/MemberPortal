- content_for :foot do
  = javascript_include_tag 'react', 'react_ujs', cache: 'react-core'
  = javascript_include_tag 'components'

- content_for :title, 'Match listings for the week of ' + @start_date.strftime('%_m.%-d.%Y')

.row.actions
  .medium-8.columns.medium-centered
    %ul.button-group
      - if @prev_date
        %li{ class: "small-#{@is_current_week ? '6' : '4'}" }
          = link_to matches_path(date: @prev_date), class: 'button secondary small expand' do
            = icon 'arrow-circle-o-left fa-fw'
            = @prev_link
      - unless @is_current_week
        %li.small-4
          = link_to matches_path, class: 'button small expand' do
            = icon 'calendar-o fa-fw'
            This Week
      - if @next_date
        %li{ class: "small-#{@is_current_week ? '6' : '4'}" }
          = link_to matches_path(date: @next_date), class: 'button secondary small expand' do
            = @next_link
            = icon 'arrow-circle-o-right fa-fw'

= react_component 'Matches', { show_admin_ui: can?(:manage, Match), start_date: @start_date.to_f * 1000, matches: @matches.decorate.map { |m| m.for_react(user: current_user) } }, prerender: true

- if can? :manage, Match
  #matches-admin.reveal-modal.small{ data: { reveal: true } }
    %a.close-reveal-modal{ href: '#' } &times;
    %h2 Matches Admin
    .row
      = form_tag import_matches_path, class: 'row collapse' do
        .medium-4.columns
          = label_tag :url, 'Import/Update Matches'
        .medium-8.columns
          .small-8.columns
            = text_field_tag :url, 'http://ics.ecal.com/ecal-sub/587a65961406256574913027/Major%20League%20Soccer.ics'
          .small-4.columns
            = button_tag :submit, class: 'button secondary postfix', title: 'Import/Update Matches' do
              = icon 'cloud-download fa-fw'
    .row
      = form_tag bulk_update_matches_path, class: 'row collapse', multipart: true, method: :post do
        .medium-4.columns
          %label
            Batch Update Results
            %small.hint{ title: "CSV should be in the following format:\nDate,Home,Away,HG,AG\n6/12,NE,CLB,1,3" } ?
        .medium-8.columns
          .small-8.columns
            = file_field_tag :file
          .small-4.columns
            = button_tag :submit, class: 'button secondary postfix', title: 'Upload' do
              = icon 'upload fa-fw'
    .row
      .medium-8.columns.right
        = link_to auto_update_matches_path, class: 'button small secondary expand' do
          = icon 'refresh fa-fw'
          Automated Results Update
    .row
      .medium-8.columns.right
        = link_to new_match_path, class: 'button small expand' do
          = icon 'calendar fa-fw'
          New Match
